# 起動時の不具合修正完了

## 実装した変更

### 1. MasterProvider（種目一覧）の二段階初期化

**変更内容:**
- 起動直後に利用可能な静的デフォルト種目リストを追加
- コンストラクタで即座にデフォルト種目を`_exercises`に設定
- その後、バックグラウンドでFirestoreから実データを読み込み

**効果:**
- アプリ起動直後から種目が利用可能
- ネットワーク待ちなし
- 「種目がありません」エラーが発生しない

**デフォルト種目:**
- ベンチプレス
- スクワット
- デッドリフト
- 懸垂
- ベントオーバーロー
- ショルダープレス

### 2. WorkoutEditorScreenの待機ループ削除

**変更内容:**
- 種目読み込み待機のポーリングループを削除
- MasterProviderが常にデフォルト種目を持つため不要に

**効果:**
- ボタン押下時の待機時間なし
- UI操作性の向上

### 3. HomeScreenカレンダーの「今日」表示修正

**変更内容:**
- `_focusedDay`を初期化時に正規化（時刻を00:00:00に統一）
- `DateTime.utc`から`DateTime`（ローカル）に変更済み

**効果:**
- 起動直後から「今日」の薄い紫の丸が確実に表示
- データロードと無関係に即時表示

## テスト確認項目

✅ アプリ起動直後（1秒以内）にHomeを操作
  - 「今日」の薄い紫丸が常に表示される
  - すぐワークアウト追加しても「種目がありません」が出ない

✅ ネットワークが遅い/オフでも
  - ローカル/デフォルトで最低限使える
  - 後からオンラインになったら同期される

## 技術詳細

### 起動フロー
1. アプリ起動
2. MasterProvider初期化 → デフォルト種目を即座に設定
3. HomeScreen表示 → 正規化された日付で「今日」マーカー表示
4. バックグラウンドでFirestore同期開始
5. 実データ取得後、デフォルトを置き換え

### 禁止事項の遵守
- ❌ ローディング画面なし
- ❌ スプラッシュ延長なし
- ❌ 初回待機なし
- ❌ 起動遅延なし
- ❌ 長時間ボタン無効化なし

すべて遵守しています。

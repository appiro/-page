# 部位表示順序のカスタマイズ

## 変更内容

種目選択画面（ExercisePickerScreen）の部位表示順序を以下のようにカスタマイズしました：

### 表示順序
1. ⭐ **お気に入り**（お気に入り登録がある場合のみ）
2. 💪 **胸**
3. 🦵 **脚**（または「足」）
4. 🔙 **背中**
5. 💪 **肩**
6. 💪 **腕**
7. 🧘 **体幹**

※ 上記以外の部位がある場合は、最後に名前順で表示されます。

---

## 実装方法

### カスタム順序マップ
```dart
final bodyPartOrder = {
  '胸': 1,
  '脚': 2,
  '足': 2, // Alternative name for legs
  '背中': 3,
  '肩': 4,
  '腕': 5,
  '体幹': 6,
};
```

### ソートロジック
```dart
final sortedKeys = groupedExercises.keys.toList()
  ..sort((a, b) {
    // 1. お気に入りを最初に
    if (a == '_favorites') return -1;
    if (b == '_favorites') return 1;
    
    // 2. 部位名を取得
    final nameA = bodyPartA?.name ?? '';
    final nameB = bodyPartB?.name ?? '';
    
    // 3. カスタム順序を取得（未定義は999）
    final orderA = bodyPartOrder[nameA] ?? 999;
    final orderB = bodyPartOrder[nameB] ?? 999;
    
    // 4. 順序で比較
    if (orderA != orderB) {
      return orderA.compareTo(orderB);
    }
    
    // 5. 同じ順序の場合は名前順
    return nameA.compareTo(nameB);
  });
```

---

## 表示イメージ

```
┌─────────────────────────────────┐
│ ⭐ お気に入り                   │
│ ⭐ ベンチプレス        →        │
│ ⭐ スクワット          →        │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │
│ 胸                              │
│ ⭐ ベンチプレス        →        │
│ ☆ ダンベルフライ      →        │
│ 脚                              │
│ ⭐ スクワット          →        │
│ ☆ レッグプレス        →        │
│ 背中                            │
│ ☆ デッドリフト        →        │
│ ☆ 懸垂                →        │
│ 肩                              │
│ ☆ ショルダープレス    →        │
│ 腕                              │
│ ☆ バーベルカール      →        │
│ 体幹                            │
│ ☆ プランク            →        │
└─────────────────────────────────┘
```

---

## 修正ファイル

- ✅ `lib/screens/exercise_picker_screen.dart`
  - カスタム順序マップを追加
  - ソートロジックを更新

---

## 利点

1. **直感的な順序** - 一般的なトレーニングの流れに沿った順序
2. **カスタマイズ可能** - 順序マップを変更するだけで簡単に調整可能
3. **拡張性** - 新しい部位を追加しても自動的に最後に表示される
4. **一貫性** - お気に入りは常に最上部に固定

---

## 今後の拡張案

### 1. ユーザーカスタマイズ
- 設定画面で部位の順序を変更可能に
- ドラッグ&ドロップで並び替え

### 2. プリセット
- 「上半身優先」「下半身優先」などのプリセット
- ワンタップで順序を変更

### 3. 使用頻度順
- よく使う部位を自動的に上位に表示
- 統計データに基づいた動的な順序

---

完了！部位が指定された順序で表示されるようになりました。
